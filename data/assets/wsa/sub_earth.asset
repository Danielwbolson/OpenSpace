local assetHelper = asset.require('util/asset_helper')
local transforms = asset.require('./transforms')

local transferFunctions = asset.localResource("transferfunctions")
local fieldlinesDirectory = asset.localResource("fl_sub_earth")
local polarityColorTable = transferFunctions .. "/polarity_spec.txt"
local subEarthLevelColorTable = transferFunctions .. "/subearth_spec.txt"


local sunRadius = 695508000

-- Fieldlies from json
local fieldlines = {
    Identifier = "WSA_Fieldlines_Sub_Earth_Track",
    Parent = transforms.TransformGONG.Identifier, -- Use this for regular GONG (Main fieldline endpoints)
    -- Parent = transforms.HNMReferenceFrame.Identifier, -- Use this for ADAPT GONG (Parker Solar Probe endpoints)
    Renderable = {
        Type = "RenderableFieldlinesSequence",
        SourceFolder = fieldlinesDirectory,
        -- Dynamic web content wants a url with a unique id where the data may be fetched.
        --DynamicWebContent = "https://iswa.gsfc.nasa.gov/IswaSystemWebApp/FilesInRangeServlet?dataID=1176",
        FlowEnabled = false,
        AlphaBlendlingEnabled = false,
        InputFileType = "osfls",
        ColorTablePaths = {
            polarityColorTable,
            subEarthLevelColorTable
        },
        ColorTableRanges = {
            { 0.0, 1.0 },
            { 0.0, 2.0 }
        },
        LoadAtRuntime = true,
        ScaleToMeters = 1.0,
        SimulationModel = "wsa",
        ColoringMethod = "Quantity",
    },
    GUI = {
        Path = "/Solar System/Heliosphere",
        Name = "WSA Sub-Earth track"
    },
    Transform = {
        Scale = {
            Type = "StaticScale",
            Scale = sunRadius
        },
    }
} 

assetHelper.registerSceneGraphNodesAndExport(asset, { fieldlines })
