local assetHelper = asset.require('util/asset_helper')
local sunTransforms = asset.require('scene/solarsystem/sun/transforms')
local earthTransforms = asset.require('scene/solarsystem/planets/earth/transforms')
local earthAsset = asset.require('scene/solarsystem/planets/earth/earth')

local sceneHelper = asset.require('util/scene_helper')
local propertyHelper = asset.require('util/property_helper')

local models = asset.syncedResource({
    Name = "Dsn models",
    Type = "HttpSynchronization",
    Identifier = "dsn_stations",
    Version = 1
})

local LightSources = {
    {
        Type = "SceneGraphLightSource",
        Identifier = "Sun",
        Node = sunTransforms.SolarSystemBarycenter.Identifier,
        Intensity = 1.0
    },
    {
        Identifier = "Camera",
        Type = "CameraLightSource",
        Intensity = 0.5
    }
}

-- Colormap for the different sites
local siteColorMap = {  
                        GoldstoneColor = {0.0, 0.0, 1.0}, 
                        CanberraColor = {1.0, 0.0, 0.0}, 
                        MadridColor = {0.0, 1.0, 0.0} 
                      }

-- Map to the site locations above, this will determine the signal colors
local stationSiteMap = {
                 DSS14 = "GoldstoneColor",
                 DSS15 = "GoldstoneColor",
                 DSS24 = "GoldstoneColor",
                 DSS25 = "GoldstoneColor",
                 DSS26 = "GoldstoneColor",
                 DSS43 = "CanberraColor",
                 DSS34 = "CanberraColor",
                 DSS35 = "CanberraColor",
                 DSS36 = "CanberraColor",
                 DSS45 = "CanberraColor",
                 DSS63 = "MadridColor",
                 DSS65 = "MadridColor",
                 DSS54 = "MadridColor",
                 DSS55 = "MadridColor"
        }

--------------------- Goldstone ------------------------
local DSS14 = {
    Identifier = "DSS14",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = { -2350973.5,-4636119.5, 3697665 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/70m_dish/70m_dish.obj"
        },
        ColorTexture = models .. "/70m_dish/truss_dish_AO.jpg" 

    },
    GUI = {
        Name = "DSS14",
        Path = "/Solar System/Stations/Goldstone"
    }
}

-- Retired?
local DSS15 = {
    Identifier = "DSS15",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = { -2350973.5, -4636120, 3697665.5 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS15",
        Path = "/Solar System/Stations/Goldstone"
    }
}


local DSS24 = {
    Identifier = "DSS24",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-2352268.0,-4641634.5,3689828.75 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS24",
        Path = "/Solar System/Stations/Goldstone"
    }
}

local DSS25 = {
    Identifier = "DSS25",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-2352383.75,-4641748,3689626.25 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS25",
        Path = "/Solar System/Stations/Goldstone"
    }
}

local DSS26 = {
    Identifier = "DSS26",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-2352253.25,-4641961,3689457.25}
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS26",
        Path = "/Solar System/Stations/Goldstone"
    }
}


--------------------- Canberra ------------------------

local DSS43 = {
    Identifier = "DSS43",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-4455882,2679347,-3695353.25 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/70m_dish/70m_dish.obj"
        },
        ColorTexture = models .. "/70m_dish/truss_dish_AO.jpg" 

    },
    GUI = {
        Name = "DSS43",
        Path = "/Solar System/Stations/Canberra"
    }
}
 
local DSS34 = {
    Identifier = "DSS34",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-4456134,2679425.5,-3694997.5}
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS34",
        Path = "/Solar System/Stations/Canberra"
    }
}

local DSS35 = {
    Identifier = "DSS35",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-4456261,2679554.75,-3694756 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS35",
        Path = "/Solar System/Stations/Canberra"
    }
}

local DSS36 = {
    Identifier = "DSS36",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-4456158,2679802,-3694689.75 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS36",
        Path = "/Solar System/Stations/Canberra"
    }
}

-- Retired 2016
local DSS45 = {
    Identifier = "DSS45",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {-4455930.5,2679756.25,-3694974.25}
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS45",
        Path = "/Solar System/Stations/Canberra"
    }
}


--------------------- Madrid ------------------------

local DSS63 = {
    Identifier = "DSS63",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {4842262,-359673.125,4137003.5}
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/70m_dish/70m_dish.obj"
        },
        ColorTexture = models .. "/70m_dish/truss_dish_AO.jpg" 

    },
    GUI = {
        Name = "DSS63",
        Path = "/Solar System/Stations/Madrid"
    }
}

local DSS65 = {
    Identifier = "DSS65",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {4842509.5,-359920.125,4136644.5 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS65",
        Path = "/Solar System/Stations/Madrid"
    }
}

local DSS54 = {
    Identifier = "DSS54",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {4842605,-360216.15625,4136511.75 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS54",
        Path = "/Solar System/Stations/Madrid"
    }
}

local DSS55 = {
    Identifier = "DSS55",
    Parent = earthAsset.Earth.Identifier,
    Transform = {
      Translation = {
         Type = "StaticTranslation",
         Position = {4842696,-360097.96875,4136388.25 }
      }
   },
    Renderable = {
        Type = "RenderableModel",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/34m_dish/34m_dish.obj"
        },
        ColorTexture = models .. "/34m_dish/base_AO.png" 

    },
    GUI = {
        Name = "DSS55",
        Path = "/Solar System/Stations/Madrid"
    }
}




assetHelper.registerSceneGraphNodesAndExport(asset, {
    DSS14, DSS15, DSS24, DSS25, DSS26, DSS43, DSS34, DSS35, DSS36, DSS45, DSS63, DSS65, DSS54, DSS55
})

asset.export("siteColorMap", siteColorMap)
asset.export("stationSiteMap", stationSiteMap)