local assetHelper = asset.require('util/asset_helper')
local transforms = asset.require('./transforms')

--local testTexture = asset.require("../../../../../test3.jpg")
local texturePath2 = asset.localResource("./test2.jpg")

local textures = asset.syncedResource({
    Name = "Mars Curiosity Textures",
    Type = "HttpSynchronization",
    Identifier = "marscuriosity_textures",
    Version = 1
})

local models = asset.syncedResource({
    Name = "Mars Curiosity Model Old",
    Type = "HttpSynchronization",
    Identifier = "marscuriosity_model",
    Version = 4
})


--local models = asset.syncedResource({
--    Name = "Mars Curiosity Model",
--    Type = "HttpSynchronization",
--    Identifier = "marscuriosity_model",
--    Version = 6
--})


-- Curiosity Model --

local Curiosity = {
    Name = "Curiosity",
    Parent = transforms.CuriosityPosition.Name,
    Tag = {"planet_solarsystem", "planet_terrestrial"},
    GuiPath = "Solar System/Planets/Mars/Curiosity"
}


-- Test plane --

--local TestPlane {
--    Name = "TestPlane",
--    Parent = "Root",
--    Renderable = {
--        Type = "RenderablePlane",
--        Size = 1, 
--        Billboard = false, 
--        Texture = testTexture 
--    }
--}




local CuriosityModel = {
    Name = "CuriosityModel",
    Parent = Curiosity.Name,
    GuiPath = "/Solar Syste/Planets/Mars/Curiosity"
}

local CuriosityRA = {
    Name = "CuriosityRA",
    Parent = Curiosity.Name,
    GuiPath = "/Solar Syste/Planets/Mars/Curiosity"
}

local CuriosityMastCam = {
    Name = "CuriosityMastCam",
    Parent = Curiosity.Name,
    GuiPath = "/Solar Syste/Planets/Mars/Curiosity"
}


-- Curiosity Model Instruments --
-- Test Model

--local renderTestMarsrover = {
--    Name = "renderTestMarsrover",
--    Parent = transforms.RoverLocation.Name,
--    Renderable = {
--        Type = "RenderableSphere",
--        Size = 300.0,
--        Segments = 100.0,
--        Texture = texturePath2
--    }
--}

local Body = {
    Name = "body",
    Parent = transforms.RoverLocation.Name,
    Renderable = {
        Type = "RenderableModel",
        Body = "MARS SCIENCE LABORATORY",
        Geometry = {
          Type = "MultiModelGeometry",
          GeometryFile = models .. "/MSL_body.obj"
        },
        ColorTexture = textures .. "/MSLTextureTest.png"
    },
    GuiPath = "/Solar System/Planets/Mars/Curiosity"
}

local Body_staticParts = {
    Name = "body_staticparts",
    Parent = Body.Name,
    Renderable = {
        Type = "RenderableModel",
        Body = "MARS SCIENCE LABORATORY",
        Geometry = {
          Type = "MultiModelGeometry",
          GeometryFile = models .. "/MSL_static_parts.obj"
        },
        ColorTexture = textures .. "/MSLTextureTest.png"
    },
    GuiPath = "/Solar System/Planets/Mars/Curiosity"
}


local RotationMatrixAZ = {
    1, 0, 0,
    0, 0, 1,
    0, -1, 0
}

local RotationMatrixEL = {
    1, 0, 0,
    0, 0, -1,
    0, 1, 0
}


-- RA 

local RA_Shoulder_AZ = {
    Name = "RA_Shoulder_AZ",
    Parent = transforms.RA_Shoulder_AZ_SpiceRotation.Name,
    Renderable = {
        Type = "RenderableModel",
        Body = "MSL_RA_SHOULDER_AZ",
        Geometry = {
          Type = "MultiModelGeometry",
          GeometryFile = models .. "/test_root_roverCoord.obj"
        },
        ColorTexture = textures .. "/MSLTextureTest.png"
    },
    GuiPath = "/Solar System/Planets/Mars/Curiosity"
}

-- EL
local RA_Shoulder_EL = {
    Name = "RA_Shoulder_EL",
    Parent = transforms.RA_Shoulder_EL_SpiceRotation.Name,
    Renderable = {
        Type = "RenderableModel",
        Body = "MSL_RA_SHOULDER_EL",
        Geometry = {
          Type = "MultiModelGeometry",
          -- GeometryFile = models .. "/MSL_RA_arm_1.obj"
          GeometryFile = models .. "/test_arm_1_origo.obj"
        },
        ColorTexture = textures .. "/MSLTextureTest.png"
        --ModelTransform = RotationMatrixEL
    },
    GuiPath = "/Solar System/Planets/Mars/Curiosity"
}

--
local RA_Elbow = {
    Name = "RA_Elbow",
    Parent = transforms.RA_Elbow_SpiceRotation.Name,
    Renderable = {
        Type = "RenderableModel",
        Body = "MSL_RA_ELBOW",
        Geometry = {
            Type = "MultiModelGeometry",
            GeometryFile = models .. "/test_arm_2_origo.obj"
        },
        ColorTexture = textures .. "/MSLTextureTest.png"
    },
    GuiPath = "/Solar System/Planets/Mars/Curiosity"
}
--
--local RA_Wrist = {
--    Name = "RA_Wrist",
--    Parent = transforms.RA_Wrist_Location.Name,
--    Renderable = {
--        Type = "RenderableModel",
--        Body = "MARS SCIENCE LABORATORY",
--        Geometry = {
--          Type = "MultiModelGeometry",
--          -- GeometryFile = models .. "/MSL_RA_arm_3.obj"
--          GeometryFile = models .. "/test_arm_3_origo.obj"
--        },
--        ColorTexture = textures .. "/MSLTextureTest.png"
--    },
--    GuiPath = "/Solar System/Planets/Mars/Curiosity"
--}

--local RA_aaaaarm = {
--    Name = "ra_aaaarm",
--    Parent = transforms.RA_Arm1_Location.Name,
--    Renderable = {
--        Type = "RenderableModel",
--        Body = "MARS SCIENCE LABORATORY",
--        Geometry = {
--          Type = "MultiModelGeometry",
--          GeometryFile = models .. "/Origo_RA_arm_1.obj"
--        },
--        ColorTexture = textures .. "/MSLTextureTest.png"
--    },
--    GuiPath = "/Solar System/Planets/Mars/Curiosity"
--}

-- MastCam
--
--local RSM_ = {
--    Name = "body",
--    Parent = CuriosityModel.Name,
--    Renderable = {
--        Type = "RenderableModel",
--        Body = "MARS SCIENCE LABORATORY",
--        Geometry = {
--          Type = "MultiModelGeometry",
--          GeometryFile = modelsOld .. "/MSL_body.obj"
--        },
--        ColorTexture = textures .. "/MSLTextureTest.png"
--    },
--    GuiPath = "/Solar System/Planets/Mars/Curiosity"
--}
--






--local Wheels_All = {
--    Name = "wheels_all",
--    Parent = CuriosityModel.Name,
--    Renderable = {
--        Type = "RenderableModel",
--        Body = "MARS SCIENCE LABORATORY",
--        Geometry = {
--          Type = "MultiModelGeometry",
--          GeometryFile = modelsOld .. "/MSL_wheels_ALL.obj"
--        },
--        ColorTexture = textures .. "/MSLTextureTest.png"
--    },
--    Tag = {"planet_solarsystem", "planet_terrestrial"},
--    GuiPath = "/Solar System/Planets/Mars/Curiosity"
--}



assetHelper.registerSceneGraphNodesAndExport(asset, { 
    --renderTestMarsrover,
    Curiosity,
    CuriosityModel, 
    Body,
    Body_staticParts,

    RA_Shoulder_AZ,
    RA_Shoulder_EL
    --RA_Elbow
    --RA_Wrist

    -- Wheels_All
})